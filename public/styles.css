/* Knights & Kings ÃƒÂ¢Ã¢â€šÂ¬Ã¢â‚¬Â EC board theme restart
   Goal: NO page scroll, board always fits viewport, EC-style colors + border + labels.
*/

:root{
  --bg0:#0b0f16;
  --bg1:#0f1623;
  --panel:#0d1118cc;
  --panelSolid:#0d1118;
  --stroke:#ffffff12;
  --stroke2:#ffffff1f;
  --text:#e9eef7;
  --muted:#b7c2d6;
  --navy:#16243a;
  --navy2:#1e2d48;
  --lightSq:#f4f6f8;
  --darkSq:#1f2e4b;
  --gold:#e6ea5a;

  --headerH:64px;
  --gap:22px;
  --panelW:340px;

  /* Board sizing: keep room for left/right panels and padding */
  --boardSize: min(72vh, 52vw, 720px);
  --borderW:12px;
}

*{ box-sizing:border-box; }

html,body{
  height:100%;
  margin:0;
  overflow:hidden; /* critical: no page scroll */
  background: radial-gradient(1200px 700px at 50% 0%, #141b28 0%, var(--bg0) 55%, #070a10 100%);
  color:var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}

header{
  height:var(--headerH);
  padding:14px 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid var(--stroke);
  background: linear-gradient(180deg, #0c1018 0%, #090c12 100%);
}

header .leftTitle{
  font-size:20px;
  font-weight:800;
  letter-spacing:.3px;
}

header .centerStatus{
  opacity:.85;
  font-weight:600;
}

header .rightActions{
  display:flex;
  align-items:center;
  gap:10px;
}

button{
  appearance:none;
  border:1px solid var(--stroke2);
  color:var(--text);
  background: linear-gradient(180deg, #1a2232 0%, #121826 100%);
  border-radius:10px;
  padding:9px 14px;
  font-weight:700;
  cursor:pointer;
}
button:hover{ border-color:#ffffff33; }
button:disabled{ opacity:.45; cursor:not-allowed; }

main.layout{
  height:calc(100vh - var(--headerH));
  display:grid;
  grid-template-columns: var(--panelW) 1fr var(--panelW);
  gap:var(--gap);
  padding:18px;
  align-items:start;
}

.panel{
  background: var(--panel);
  border:1px solid var(--stroke);
  border-radius:18px;
  padding:18px;
  box-shadow: 0 20px 50px #00000055;
  min-height: 0; /* allow internal scrollers */
}

.panel h2{
  margin:0 0 12px 0;
  font-size:34px;
  letter-spacing:-.5px;
}

.panel .subpillRow{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin:10px 0 16px;
}

.pill{
  border:1px solid var(--stroke2);
  background:#0b0f16aa;
  padding:6px 10px;
  border-radius:999px;
  font-weight:700;
  color:var(--muted);
  font-size:13px;
}

.sectionTitle{
  margin:16px 0 8px;
  font-size:18px;
  font-weight:800;
  color:var(--text);
}

.smallText{
  color:var(--muted);
  font-size:13px;
  line-height:1.4;
}

.actionsRow{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:14px;
}

#debug{
  margin-top:14px;
  padding:12px;
  background:#06080dcc;
  border:1px solid var(--stroke);
  border-radius:14px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12px;
  line-height:1.35;
  max-height: 40vh;
  overflow:auto;
  white-space:pre;
}

#log{
  margin-top:12px;
  padding:12px;
  background:#06080dcc;
  border:1px solid var(--stroke);
  border-radius:14px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12px;
  line-height:1.35;
  max-height: 55vh;
  overflow:auto;
  white-space:pre-wrap;
}

/* ---------- BOARD (EC style) ---------- */
.boardWrap{
  display:flex;
  align-items:center;
  justify-content:center;
  min-height: 0;
  padding-top:6px;
}

.boardFrame{
  display:grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: 1fr auto;
  gap:14px 18px;
  align-items:center;
  justify-items:center;
}

.rankLabels{
  grid-column:1;
  grid-row:1;
  display:grid;
  grid-template-rows: repeat(8, 1fr);
  align-items:center;
  justify-items:end;
  gap:0;
  height: calc(var(--boardSize) + (var(--borderW) * 2));
  padding-right:6px;
  font-family: "Cinzel", Georgia, "Times New Roman", serif;
  font-weight:700;
  font-size: clamp(18px, 2.4vh, 30px);
  color:#ffffff;
  text-shadow: 0 2px 10px #00000066;
  user-select:none;
}

.fileLabels{
  grid-column:2;
  grid-row:2;
  display:grid;
  grid-template-columns: repeat(8, 1fr);
  align-items:start;
  justify-items:center;
  gap:0;
  width: calc(var(--boardSize) + (var(--borderW) * 2));
  padding-top:8px;
  font-family: "Cinzel", Georgia, "Times New Roman", serif;
  font-weight:700;
  font-size: clamp(18px, 2.4vh, 30px);
  color:#ffffff;
  text-shadow: 0 2px 10px #00000066;
  user-select:none;
}

.boardOuter{
  grid-column:2;
  grid-row:1;
  background: var(--gold);
  padding: var(--borderW);
  border-radius: 2px;
  box-shadow: 0 18px 40px #00000055;
}

#board.board{
  width: var(--boardSize);
  height: var(--boardSize);
  display:grid;
  grid-template-columns: repeat(8, 1fr);
  grid-template-rows: repeat(8, 1fr);
  background: var(--navy);
  overflow:hidden;
}

.square{
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  user-select:none;
  position:relative;
  font-size: clamp(12px, 1.8vh, 20px);
  color:#fff;
}

.square.light{ background: var(--lightSq); }
.square.dark{ background: var(--darkSq); }

.square.selected{
  outline: 3px solid #ffffffaa;
  outline-offset: -3px;
}

.square:hover{
  filter: brightness(1.05);
}

/* Piece imagery (if you later switch renderBoard() to <img>) */
.square img{
  width: 72%;
  height: 72%;
  object-fit: contain;
  pointer-events:none;
}

/* ---------- Responsive ---------- */
@media (max-width: 1180px){
  :root{ --panelW: 320px; --boardSize: min(70vh, 50vw, 640px); }
}

@media (max-width: 1040px){
  :root{ --panelW: 300px; --boardSize: min(68vh, 54vw, 600px); }
  main.layout{ gap:16px; padding:14px; }
}

@media (max-width: 920px){
  /* stack panels under board on narrow screens */
  main.layout{
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    overflow:hidden;
  }
  .boardWrap{ order:1; }
  .panel.leftPanel{ order:2; }
  .panel.rightPanel{ order:3; }
  :root{ --boardSize: min(62vh, 92vw, 560px); }
  #log{ max-height: 30vh; }
  #debug{ max-height: 30vh; }
}

/* ===== Hand cards (visual) ===== */
/* Hand + Cards */
.panel.rightPanel{display:flex;flex-direction:column;}

#hand{margin-top:14px;}

.handList, .handGrid{
  display:grid;
  grid-template-columns:repeat(3, minmax(0, 1fr));
  gap:12px;
  align-content:start;
}

.handCard{
  width:100%;
  height:96px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.12);
  border-radius:16px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:8px;
  cursor:pointer;
  transition:transform .08s ease, border-color .15s ease, box-shadow .15s ease;
}
.handCard:hover{transform:translateY(-1px);}
.handCard.selected{border-color:rgba(235,255,85,0.9); box-shadow:0 0 0 2px rgba(235,255,85,0.25) inset;}
.handCard .cardIcon{width:44px;height:44px;object-fit:contain;filter:drop-shadow(0 2px 2px rgba(0,0,0,0.35));}
.handCard .cardLabel{font-size:12px;letter-spacing:0.06em;opacity:0.95;}

/* Keep log visible without forcing app scroll */
#log{margin-top:14px; max-height:170px; overflow:auto;}

@media (max-width: 1100px){
  .handList, .handGrid{grid-template-columns:repeat(2, minmax(0, 1fr));}
  .handCard{height:92px;}
}

/* Action Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:flex;align-items:center;justify-content:center;z-index:9999;}
.modal.hidden{display:none;}
.modalBackdrop{position:absolute;inset:0;}
.modalCard{position:relative;width:min(520px, calc(100vw - 36px));background:rgba(15,18,24,0.92);border:1px solid rgba(255,255,255,0.14);border-radius:18px;box-shadow:0 18px 70px rgba(0,0,0,0.55);backdrop-filter: blur(12px);padding:16px 16px 14px;}
.modalHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;}
.modalHeader h3{margin:0;font-size:18px;letter-spacing:0.02em;}
.iconBtn{width:38px;height:38px;border-radius:12px;border:1px solid rgba(255,255,255,0.16);background:rgba(255,255,255,0.06);color:rgba(255,255,255,0.85);cursor:pointer;}
.iconBtn:hover{background:rgba(255,255,255,0.09);}
.actionList{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));gap:10px;margin-top:8px;}
.actionItem{padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,0.14);background:rgba(255,255,255,0.05);color:#fff;text-align:left;cursor:pointer;}
.actionItem:hover{border-color:rgba(235,255,85,0.65);box-shadow:0 0 0 2px rgba(235,255,85,0.18) inset;}
.actionItem small{display:block;opacity:0.75;margin-top:4px;line-height:1.2;}
@media (max-width: 520px){.actionList{grid-template-columns:1fr;}}
